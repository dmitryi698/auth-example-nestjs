# Auth Example NestJS

Проект демонстрирует реализацию аутентификации и управления пользователями с использованием NestJS, Kysely (для работы с базой данных) и JWT.

## Структура проекта

```
auth-example-nestjs/
├── src/
│   ├── app/                # Основной модуль приложения
│   ├── auth/               # Логика аутентификации (контроллеры, сервисы, DTO)
│   │   ├── dto/            # Data Transfer Objects для аутентификации
│   │   ├── guards/         # Guards для защиты маршрутов
│   │   ├── strategies/     # Стратегии аутентификации (JWT)
│   ├── entity/             # Сущности базы данных
│   ├── modules/            # Дополнительные модули (например, user)
│   │   ├── user/           # Логика работы с пользователями
│   │   │   ├── dto/        # DTO для пользователей
│   ├── shared/             # Общие утилиты/сервисы
│   ├── sql/                # SQL-скрипты для инициализации БД
│   ├── typings/            # Глобальные типы TypeScript
├── test/                   # E2E и unit-тесты
├── .eslintrc.js            # Конфигурация ESLint
├── nest-cli.json           # Конфигурация NestJS CLI
├── package.json            # Зависимости и скрипты
├── tsconfig.json           # Конфигурация TypeScript
```


## Установка и запуск

### 1. Установка зависимостей
```bash
npm install
```

### 2. Настройка базы данных
- Убедитесь, что у вас запущен PostgreSQL (или другая СУБД, поддерживаемая Kysely).
- Запустите SQL-скрипты из папки `src/sql/` для инициализации таблиц.

### 3. Настройка переменных окружения
Создайте файл `.env` в корне проекта и заполните его по примеру `.env.example`:
```env
DATABASE_URL=postgres://user:password@localhost:5432/db_name
JWT_SECRET=your_jwt_secret
```

### 4. Запуск приложения
```bash
# В development-режиме
npm run start:dev

# В production-режиме
npm run build
npm run start:prod
```

### 5. Документация API (Swagger)
После запуска приложения откройте Swagger UI по адресу:
[http://localhost:3000/swagger](http://localhost:3000/swagger)

Здесь вы найдете:
- Описание всех доступных эндпоинтов.
- Примеры запросов и ответов.
- Возможность тестирования API прямо в браузере.

### 6. Тестирование
```bash
# Unit-тесты
npm run test
```

## API Endpoints
- **Аутентификация**:
  - `POST /auth/register` — регистрация пользователя.
  - `POST /auth/login` — вход и получение JWT-токена.
- **Пользователи**:
  - `GET /users` — список пользователей (требует JWT).

## Используемые технологии
- **NestJS** — фреймворк для серверных приложений.
- **Kysely** — типобезопасный SQL-query builder.
- **JWT** — аутентификация через токены.
- **PostgreSQL** — база данных (можно заменить на другую СУБД).
- **Swagger** — автоматическая документация API.

## Лицензия
MIT
